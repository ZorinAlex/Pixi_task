"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),View=function(){function e(t,s,a){function i(e){var t={element:e.target,x:e.data.global.x/2,y:e.data.global.y/2};r.clicked(t)}var n=this;_classCallCheck(this,e),this.model=t,this.displayW=s,this.displayH=a,this.app=new PIXI.Application(this.displayW,this.displayH,{antialias:!0}),this.elements={},this.elements.numberOfShapes=$("#numberOfShapes"),this.elements.area=$("#area"),this.elements.decreaseShapesPerSecond=$("#decreaseShapes"),this.elements.increaseShapesPerSecond=$("#increaseShapes"),this.elements.shapesPerSecond=$("#shapesPerSecond"),this.elements.decreaseGravity=$("#decreaseGravity"),this.elements.increaseGravity=$("#increaseGravity"),this.elements.gravity=$("#gravity");var r=this;this.shapesPerSecondDecreased=new Event(this),this.shapesPerSecondIncreased=new Event(this),this.gravityDecreased=new Event(this),this.gravityIncreased=new Event(this),this.mouseClicked=new Event(this),this.clicked=function(e){r.mouseClicked.notify(e)},this.elements.decreaseShapesPerSecond.click(function(){r.shapesPerSecondDecreased.notify(this)}),this.elements.increaseShapesPerSecond.click(function(){r.shapesPerSecondIncreased.notify(this)}),this.elements.decreaseGravity.click(function(){r.gravityDecreased.notify(this)}),this.elements.increaseGravity.click(function(){r.gravityIncreased.notify(this)}),this.model.modelChanged.subscribe(function(e){r.updateView(e)}),this.model.figureAdded.subscribe(function(e,t){r.drawFigure(e,t)}),this.model.figureRemoved.subscribe(function(e,t){r.clearFigure(e,t)}),this.init=function(){n.elements.numberOfShapes.text(n.model.getTotal()),n.elements.area.text(n.model.getArea()),n.elements.shapesPerSecond.text(n.model.shapesPerSecond),n.elements.gravity.text(n.model.gravity),n.app.stage.scale.x=n.app.stage.scale.y=1;var e=new PIXI.Graphics;e.beginFill(3127703),e.drawRect(0,0,n.app.renderer.width,n.app.renderer.height),e.endFill(),n.app.stage.addChild(e),n.app.stage.interactive=!0,n.app.stage.on("mousedown",i),$("#view").append(n.app.view)}}return _createClass(e,[{key:"drawFigure",value:function(e,t){t.draw(),this.app.stage.addChild(t),this.updateView(e)}},{key:"clearFigure",value:function(e,t){this.updateView(e)}},{key:"updateView",value:function(e){this.elements.numberOfShapes.text(e.getTotal()),this.elements.area.text(e.getArea().toFixed(2)),this.elements.shapesPerSecond.text(e.shapesPerSecond),this.elements.gravity.text(e.gravity)}}]),e}();