"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,i,n){return i&&e(r.prototype,i),n&&e(r,n),r}}(),Controller=function(){function e(r,i){_classCallCheck(this,e),this.model=r,this.view=i;var n=this;this.view.shapesPerSecondDecreased.subscribe(function(e){n.model.decShapesPerSecond()}),this.view.shapesPerSecondIncreased.subscribe(function(e){n.model.incShapesPerSecond()}),this.view.gravityDecreased.subscribe(function(e){n.model.decGravity()}),this.view.gravityIncreased.subscribe(function(e){n.model.incGravity()}),this.view.mouseClicked.subscribe(function(e,r){n.addFigureByMouse(r)})}return _createClass(e,[{key:"start",value:function(){var e=this,r=1;this.view.app.ticker.add(function(){if(60==r){for(var i=0;i<e.model.shapesPerSecond;i++)e.addFigure();r=1}e.model.figures.forEach(function(r,i){r.y+=e.model.gravity*r.mass,r.top>e.view.app.renderer.height+25&&(e.removeFigure(i),r.clear())}),r++})}},{key:"removeFigure",value:function(e){this.model.removeFigure(e)}},{key:"addFigureByMouse",value:function(e){new PIXI.Graphics;if(!(e.element instanceof Shape)){var r,i=this.getRandomColor();switch(Math.floor(4*Math.random())){case 0:r=new Triangle(e.x-12,e.y-10,i);break;case 1:r=new Rect(e.x-12,e.y-12,i);break;case 2:r=new Elli(e.x,e.y,i);break;case 3:r=new Circle(e.x,e.y,i)}r.interactive=!0,r.buttonMode=!0,r.on("pointerdown",this.onClick),this.model.addFigure(r)}}},{key:"addFigure",value:function(){var e,r=-25,i=Math.floor(Math.random()*(this.view.app.renderer.width/2-50)+15),n=this.getRandomColor();switch(Math.floor(4*Math.random())){case 0:e=new Triangle(i,r,n);break;case 1:e=new Rect(i,r,n);break;case 2:e=new Elli(i,r,n);break;case 3:e=new Circle(i,r,n)}e.interactive=!0,e.buttonMode=!0,e.on("pointerdown",this.onClick),this.model.addFigure(e)}},{key:"getRandomColor",value:function(){for(var e="0x",r=0;r<6;r++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"onClick",value:function(){model.removeByObj(this),this.clear()}},{key:"removeByObj",value:function(e){this.model.removeByObj(e)}}]),e}();